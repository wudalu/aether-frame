# Aether Frame Project Layout

This document defines the complete directory structure and organization of the Aether Frame project.

## Overall Project Structure

```
aether-frame/
├── pyproject.toml                   # Project metadata configuration
├── requirements/                    # Dependency management directory
│   ├── base.in                     # Base dependencies (manually maintained)
│   ├── dev.in                      # Development dependencies (manually maintained)
│   ├── base.txt                    # Compiled base dependencies (generated by pip-compile)
│   └── dev.txt                     # Compiled dev dependencies (generated by pip-compile)
├── README.md
├── CHANGELOG.md
├── .gitignore
├── .env.example                    # Environment variable template
├── dev.py                          # Python-based development command management
├── docs/                          # Documentation directory
│   └── architecture.md            # Architecture design document
├── scripts/                       # Scripts directory
│   ├── compile-requirements.sh    # Dependency compilation script
│   ├── setup.sh                   # Environment setup script
│   └── dev-tools/                 # Development tool scripts
├── tests/                         # Test directory
│   ├── __init__.py
│   ├── unit/                      # Unit tests
│   ├── integration/               # Integration tests
│   ├── e2e/                       # End-to-end tests
│   └── fixtures/                  # Test data
└── src/                           # Source code root directory
    └── aether_frame/              # Main package
        ├── __init__.py
        ├── main.py                # Application entry point
        ├── config/                # Configuration module
        ├── common/                # Common utilities module
        ├── execution/             # Execution layer
        ├── framework/             # Framework abstraction layer
        ├── agents/                # Core Agent layer
        ├── tools/                 # Tool service layer
        ├── memory/                # Memory/context module
        ├── observability/         # Observability module
        └── infrastructure/        # Infrastructure layer
```

## Core Module Detailed Structure

### Configuration Module (config/)
```
config/
├── __init__.py
├── settings.py        # Application settings
├── logging.py         # Logging configuration
└── environment.py     # Environment variable management
```

### Common Utilities Module (common/)
```
common/
├── __init__.py
├── utils.py           # Common utility functions
├── exceptions.py      # Custom exceptions
├── constants.py       # Constant definitions
└── types.py           # Type definitions
```

### Execution Layer (execution/)
Corresponds to the Application Orchestration Layer in the architecture, responsible for task execution routing and control.

```
execution/
├── __init__.py
├── ai_assistant.py    # AI Assistant component - task routing decisions
├── workflow/          # Workflow Engine - static workflows
│   ├── __init__.py
│   ├── engine.py
│   └── executor.py
└── coordinator/       # Coordinator Agent - dynamic workflows
    ├── __init__.py
    ├── agent.py
    └── planner.py
```

### Framework Abstraction Layer (framework/)
Corresponds to the Framework Abstraction Layer in the architecture, providing multi-framework support.

```
framework/
├── __init__.py
├── adapter.py         # Framework Adapter
├── api.py            # Unified Agent API
├── config.py         # Framework Config
├── adk/              # ADK framework implementation
│   ├── __init__.py
│   ├── runtime.py
│   └── adapter.py
├── autogen/          # AutoGen framework implementation
│   ├── __init__.py
│   └── adapter.py
└── langgraph/        # LangGraph framework implementation
    ├── __init__.py
    └── adapter.py
```

### Core Agent Layer (agents/)
Corresponds to the Core Agent Layer in the architecture.

```
agents/
├── __init__.py
├── base/             # Base agent classes
│   ├── __init__.py
│   ├── agent.py      # Agent base class
│   └── lifecycle.py  # Agent lifecycle management
├── domain/           # Domain Agents - domain-specific agents
│   ├── __init__.py
│   ├── agent1/       # Example domain agent 1
│   │   ├── __init__.py
│   │   └── agent.py
│   ├── agent2/       # Example domain agent 2
│   │   ├── __init__.py
│   │   └── agent.py
│   └── registry.py   # Agent Registry
└── factory.py        # Agent Factory
```

### Tool Service Layer (tools/)
Corresponds to the Tool Service Layer in the architecture, as an independent service layer.

```
tools/
├── __init__.py
├── base.py           # Tool base class
├── registry.py       # Tool Registry
├── search/           # Search tools
│   ├── __init__.py
│   └── engines.py
├── llm/             # LLM tools
│   ├── __init__.py
│   ├── openai.py
│   └── vertexai.py
└── external/        # External API tools
    ├── __init__.py
    └── apis.py
```

### Memory/Context Module (memory/)
Manages application-level memory and context, including session management.

```
memory/
├── __init__.py
├── interface.py      # Memory interface definitions
├── store.py         # State Store implementation
├── context.py       # Context management
├── session/         # Session Manager
│   ├── __init__.py
│   └── manager.py
└── providers/       # External memory implementations
    ├── __init__.py
    ├── redis.py     # Redis storage implementation
    └── postgres.py  # PostgreSQL storage implementation
```

### Observability Module (observability/)
Integrates observability-related capabilities.

```
observability/
├── __init__.py
├── metrics.py       # Metrics collection
├── tracing.py       # Distributed tracing
├── logging.py       # Log management
└── monitoring.py    # Monitoring integration
```

### Infrastructure Layer (infrastructure/)
Corresponds to the Infrastructure Layer in the architecture.

```
infrastructure/
├── __init__.py
├── runtime/         # Framework runtime integrations
│   ├── __init__.py
│   ├── adk_runtime.py      # ADK Runtime integration
│   ├── autogen_runtime.py  # AutoGen Runtime integration
│   └── langgraph_runtime.py # LangGraph Runtime integration
├── storage/         # Storage related
│   ├── __init__.py
│   └── providers.py
└── external/        # External service integrations
    ├── __init__.py
    └── services.py
```

## Dependency Management Strategy

### pip-tools Workflow

1. **Write Dependency Requirements** (`requirements/*.in`)
   - Only write direct dependencies and version constraints
   - Separate base dependencies and development dependencies

2. **Compile Locked Versions** (`requirements/*.txt`)
   ```bash
   python dev.py compile-deps
   ```

3. **Install Dependencies**
   ```bash
   # Production environment
   python dev.py install
   
   # Development environment
   python dev.py dev-install
   ```

### Development Commands

```bash
# Compile dependencies
python dev.py compile-deps

# Install production dependencies
python dev.py install

# Install development dependencies
python dev.py dev-install

# Run tests
python dev.py test

# Clean cache
python dev.py clean
```

## Architecture Layer Mapping

| Architecture Layer | Directory | Description |
|-------------------|-----------|-------------|
| Application Orchestration Layer | `execution/` | Execution layer, containing AI Assistant and two workflow modes |
| Framework Abstraction Layer | `framework/` | Framework abstraction layer, supporting multi-framework switching |
| Core Agent Layer | `agents/` + `tools/` | Core Agent layer and tool service layer |
| Infrastructure Layer | `infrastructure/` | Infrastructure layer, containing various external integrations |
| Memory/Context | `memory/` | Memory and context management, including session management |

## Development Conventions

1. **Code Organization**: Organized by architectural layers, each layer has clear responsibilities
2. **Dependency Management**: Use pip-tools to manage deterministic dependencies
3. **Testing Strategy**: Separate unit tests, integration tests, and end-to-end tests
4. **Configuration Management**: Environment variables + configuration file separation
5. **Observability**: Built-in monitoring, logging, and tracing capabilities

## Extension Guide

### Adding New Domain Agents
```
agents/domain/new_agent/
├── __init__.py
├── agent.py
└── config.py
```

### Adding New Framework Support
```
framework/new_framework/
├── __init__.py
├── adapter.py
└── runtime.py
```

### Adding New Tools
```
tools/new_tool/
├── __init__.py
└── implementation.py
```